<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta charset="utf-8">
  <title>guidepost editor help</title>
  <style>
  section {
   xfont-weight: bold;
   margin-top: 10px;
   margin-bottom: 10px;
   display: block;
   background: lightgrey;
  }
  </style>
</head>
<body>
  <h1>Help</h1>
  <p><b>tagy:</b> stitky popisujici co se nachazi na fotce. Informace o obsahu fotky, o tom co na ni vidime. Prosim <b>nevkladejte</b> tagy ve smyslu osm - zadne ele:123 nebo tourism:information - nema zadny smysl duplikovat openstreetmap data. Vyjimka je ref:xxx, zato je nutne otagovat vsechny mozne referencni cisla, ktere na fotografii nalezneme. Je vhodne vlozit tag rozcestnik, pokud se na fotce nachazi, dale treba zelena, nebo cyklo atd. Je nutne taky otagovat mapy (mapa), nebo fotku turisticke znacky oznacujici konec/zacatek nebo treba odbocku k hradu ktera nema vlastni rozcestnik (znaceni).</p>
  <h2>Changelog</h2>
  <ul>
    <li>151221: pridana polozka note - Poznamka</li>
    <li>151228: oznaceni pro smazani</li>
    <li>151229: mazani funguje, mazat se budou pouze fotky duplicitni a ilegalni.</li>
    <li>160302: tagy, api call na ziskani</li>
    <li>160307: tagy, pridavani, autocomplete</li>
    <li>160315: tagy, vyhledavani, cistej JSON output</li>
    <li>160323: move, exif</li>
    <li>160329: ping, robot</li>
    <li>180520: gpx, json</li>
    <li>180524: time</li>
    <li>180613: projekty start</li>
    <li>180817: projekty, session a prihlaseni v podsate funguje.</li>
    <li>181001: migrace na openstreetmap.social</li>
    <li>210910: opravy chyb, opravy tohoto textu</li>
  </ul>
  <hr>
  <h2>Public API</h2>
  <ul>
    <li>
      <section>
        <h3>all</h3>
        <dl>
          <dt>GET</dt>
          <dd>Zobrazi vsechny zaznamy</dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/all'>example</a>
          </dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/all?output=json'>example json output</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>count</h3>
        <dl>
          <dt>GET</dt>
          <dd>Zobrazi pocet zaznamu</dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/count'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>get</h3>
        <dl>
          <dt>zobrazi uzivatelske jmeno prihlaseneho uzivatele</dt>
          <dd>
            <a href='https://api.openstreetmap.social/table/get/1/3?output=html'>example</a>
          </dd>
          <dt>parametry</dt>
          <dd>/from_id</dd>
          <dd>/to_id</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>leaderboard</h3>
        <dl>
          <dd>
            <a href='https://api.openstreetmap.social/table/leaderboard'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>username</h3>
        <dl>
          <dt>zobrazi uzivatelske jmeno prihlaseneho uzivatele</dt>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>name</h3>
        <dl>
          <dd></dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>id</h3>/hodnota
        <p>Zobrazí položku db s id rovnajici se hodnota<br>
        <a href='https://api.openstreetmap.social/table/id/100?output=html'>example</a></p>
      </section>
    </li>
    <li>
      <section>
        <h3>ref</h3>/hodnota
        <p>Zobrazí vsechny položky db s ref rovnajici se hodnota<br>
        <a href='https://api.openstreetmap.social/table/ref/100?output=html'>example</a></p>
      </section>
    </li>
    <li>
      <section>
        <h3>name</h3>/hodnota
        <p>Zobrazí vsechny položky db se jmenem autora rovnajici se hodnota<br>
        <a href='https://api.openstreetmap.social/table/name/bublifuk?output=html'>example</a></p>
      </section>
    </li>
    <li>
      <section>
        <h3>note</h3>/hodnota
        <p>Zobrazí vsechny položky db s poznamka rovnajici se hodnota<br>
        <a href='https://api.openstreetmap.social/table/note/100?output=html'>example</a></p>
      </section>
    </li>
    <li>
      <section>
        <h3>isedited</h3>/column/id
        <p>vrati pocet editaci atributu col pro id</p>
        <p>column - ref|note|...</p>
      </section>
    </li>
    <li>
      <section>
        <h3>isdeleted</h3>/id
        <p>vrati zda id je oznaceno pro smazani</p>
      </section>
    </li>
    <li>
      <section>
        <h3>close</h3>
        <dl>
          <dt>GET</dt>
          <dd>
            vrati polozky ve vzdalenosti distance od lat,lon<br>
            parametry lat,lon,distance, vzdy nastavi geojson output <a href='https://api.openstreetmap.social/table/close?lat=49.709297&amp;lon=17.07934&amp;distance=1000'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>tags/id</h3>
        <dl>
          <dt>GET</dt>
          <dd>vrati tagy pro fotku id</dd>
          <dt>DELETE</dt>
          <dd>smaze tagy pro fotku id parametry url /id/key:value</dd>
          <dt>POST</dt>
          <dd>prida tagy pro fotku id parametry post id tag</dd>
        </dl>
      </section>
    </li>
    <li>deprecated: tags/add/id/value - no longer used</li>
    <li>
      <section>
        <h3>tags/hashtag/key:value</h3>
        <dl>
          <dt>GET</dt>
          <dt>
            vyhledava tagy (v db je to brano jako klic a hodnota), tag bez hodnoty se hleda jako klic: nebo klic, hodnota bez klice :hodnota.<br>
            <a href='https://api.openstreetmap.social/table/hashtag/rozcestnik:'>example</a>
          </dt>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>setbyid</h3>
        <dl>
          <dt>POST</dt>
          <dd>nastavuje vlastnost fotky</dd>
          <dt>post parametry:</dt>
          <dd>id:specialni format - "vlastnost_id" vlastnost je sloupec v db</dd>
          <dd>value</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>move</h3>
        <dl>
          <dt>POST</dt>
          <dd>presun fotky</dd>
          <dt>post parametry:</dt>
          <dd>id</dd>
          <dd>lat</dd>
          <dd>lon</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>exif</h3>
        <dl>
          <dt>GET</dt>
          <dd>vraci exif fotky</dd>
          <dt>parametry:</dt>
          <dd>/id</dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/exif/100'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>ping</h3>
        <dl>
          <dt>GET</dt>
          <dd>vraci pong</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>robot</h3>
        <dl>
          <dt>GET</dt>
          <dd>spusti automaticke schvaleni nekterych akci.<br>
          (pridani tagu, tbd...)</dd>
          <dd></dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/robot'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>serverinfo</h3>
        <dl>
          <dt>GET</dt>
          <dd>dump %ENV, privileged_access</dd>
          <dd>
            <a href='https://api.openstreetmap.social/table/serverinfo'>example</a>
          </dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>notify</h3>
        <dl>
          <dt>POST</dt>
          <dt>post parametry: lat, lon, text<br>
          posle zpravu adminovy serveru</dt>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>licenseinfo</h3>
        <dl>
          <dt>GET</dt>
          <dd>vypise zname licence, jine nelze pouzit</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>sequence/xy</h3>
        <dl>
          <dt>GET</dt>
          <dt>parametry: 2 pismena zacatku ref rozcestniku, vypise seznam vsech 1000 referenci, DB znamena ze je v db</dt>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>remove</h3>
        <dl>
          <dt>GET</dt>
          <dt>parametry: id</dt>
        </dl>
      </section>
    </li>
    <li>
      <section>
        timeadded
        <dl>
          <dt>GET</dt>
          <dd>
            <a href='https://api.openstreetmap.social/table/timeadded/14000?output=html'>example</a>
          </dd>
          <dt>parametry: id</dt>
          <dd>zobrazi cas pridani fotky, pokud je znam, format zatim pouze 2017-07-17 15:58:39</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        timetaken
        <dl>
          <dt>GET</dt>
          <dd>
            <a href='https://api.openstreetmap.social/table/timetaken/100?output=html'>example</a>
          </dd>
          <dt>parametry: id</dt>
          <dd>zobrazi cas vyfoceni z exifu pokud je znam, format zatim pouze 2017-07-17 15:58:39</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        project/nazev TBD
        <dl>
          <dt>GET</dt>
          <dd>vrati seznam fotek v projektu</dd>
          <dt>POST</dt>
          <dd>prida fotku do projektu</dd>
          <dt>DELETE</dt>
          <dd>smaze fotku z projektu</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        projectlist
        <dl>
          <dt>GET</dt>
          <dd>vrati seznam projektu</dd>
          <dt>POST</dt>
          <dd>prida projekt</dd>
          <dt>DELETE</dt>
          <dd>smaze projekt</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>loginxxx</h3>
        <dl>
          <dt>GET</dt>
          <dd>iniciuje logovaci proces pro xxx platformu, xxx je github, nextcloud(tbd)</dd>
        </dl>
      </section>
    </li>
    <li>
      <section>
        <h3>logout</h3>
        <dl>
          <dt>GET</dt>
          <dd>odhlasi prihlaseneho uzivatele, smaze jeho session</dd>
        </dl>
      </section>
    </li>
  </ul><br>
  <h2>parametry pro definici a filtrovany vystupu</h2>
  <p><code>format: url?parametr=hodnota&amp;parametr2=hodnota2</code> zmeni format vystupu, nebo vrati http status 400</p>
  <ol>
    <li><b>bbox</b> vymezuje oblast pro dotaz =-20,-40,60,40</li>
    <li>
      <b>output</b> specifikace vystupu:
      <ol>
        <li>html - vystup v html&nbsp;</li>
        <li>geojson - vystup v geojson</li>
        <li>kml - vystup v kml (Google Earth)</li>
        <li>gpx - gpx s extension na vzdalenost od garminu</li>
        <li>json - cisty json.</li>
      </ol>
    </li>
    <li><b>limit</b> - omezuje pocet vracenych vysledku</li>
    <li><b>offset</b> - umoznuje zobrazeni od urciteho zaznamu, takze ve spolupraci s limit to dela od-do</li>
  </ol>
  <h3>privileged api</h3>
  <ol>
    <li>delete/id smazani</li>
    <li>remove zadost o smazani<br>
      <dl>
        <dt>GET</dt>
        <dt>parametry: id</dt>
      </dl>
    </li>
  </ol>
  <pre>produced by tidy -utf8  -i  -w 0 -o o.html -f zzzzzzzzzz editor-help.html</pre>
</body>
</html>
